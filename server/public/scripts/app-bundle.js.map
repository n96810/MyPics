{"version":3,"sources":["src/app.js","src/auth-config.js","src/environment.js","src/main.js","src/modules/home.js","src/modules/list.js","src/resources/index.js","src/resources/data/data-services.js","src/resources/data/galleries.js","src/resources/data/pictures.js","src/resources/data/users.js","src/resources/elements/flatpickr.js","src/resources/value-converters/date-format.js"],"names":["App","configureRouter","config","router","addPipelineStep","map","authConfig","debug","testing","configure","window","regeneratorRuntime","Promise","aurelia","use","standardConfiguration","plugin","baseConfig","feature","developmentLogging","start","then","setRoot","Home","users","auth","loginError","message","showLogin","login","console","log","email","password","sessionStorage","setItem","JSON","stringify","response","user","navigate","catch","error","showRegister","User","registerError","saveUser","save","serverResponse","List","galleries","pictures","parse","getItem","galleryObject","_id","Date","logout","removeItem","activate","getUserGalleries","openGallery","gallery","getGalleryPictures","pictureObject","exitGallery","undefined","saveGallery","userId","alert","deleteGallery","delete","savePicture","pictureId","imageFile","length","uploadImageFile","openPicture","picture","deletePicture","uploadPicture","Array","push","files","globalResources","DataServices","http","httpClient","BASE_URL","withBaseUrl","withDefaults","withInterceptor","request","method","url","authHeader","localStorage","headers","append","status","get","fetch","json","data","post","content","object","put","uploadFiles","Galleries","GALLERY_SERVICE","galleryList","id","i","splice","Pictures","PICTURE_SERVICE","pictureList","getPicture","galleryId","formData","FormData","forEach","item","index","Users","USER_SERVICE","FlatPickerCustomElement","Element","twoWay","element","bind","defaultConfig","_config","Object","assign","onChange","onMonthChange","onYearChange","attached","flatpickr","querySelector","selectedDates","dateStr","instance","value","valueChanged","newDate","setDate","DateFormatValueConverter","toView","format"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {AuthorizeStep} from \"aurelia-auth\";\n\nexport class App {\n  constructor() {\n  }\n  configureRouter(config, router) {\n    this.router = router;\n    config.addPipelineStep(\"authorize\", AuthorizeStep);\n    config.map([\n      {\n        \"route\": [\"\", \"home\"],\n        \"moduleId\": \"./modules/home\",\n        \"name\": \"Home\"\n      },\n      {\n        \"route\": \"List\",\n        \"moduleId\": \"./modules/list\",\n        \"name\": \"List\",\n        \"auth\": true\n      }\n    ]);\n  }\n}\n","var authConfig = {\r\n    \"baseUrl\": \"http://localhost:80/api\",\r\n    \"loginUrl\": \"/users/login\",\r\n    \"tokenName\": \"token\",\r\n    \"authHeader\": \"Authorization\",\r\n    \"authToken\": \"\",\r\n    \"logoutRedirect\": \"#/home\"\r\n}\r\n\r\nexport default authConfig;","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport config from \"./auth-config\";\nimport regeneratorRuntime from \"./regenerator-runtime\";\nwindow.regeneratorRuntime = regeneratorRuntime;\n\nPromise.config({ \"warnings\": { \"wForgottenReturn\": false }});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin(\"aurelia-auth\", (baseConfig) => { baseConfig.configure(config); })\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from \"aurelia-framework\";\r\nimport {Router} from \"aurelia-router\";\r\nimport {Users} from \"../resources/data/users\";\r\nimport {AuthService} from \"aurelia-auth\";\r\n\r\n@inject(Router, Users, AuthService)\r\nexport class Home {\r\n    constructor(router, users, auth) {\r\n        this.router = router;\r\n        this.auth = auth;\r\n        this.loginError = \"\";\r\n        this.users = users;\r\n        this.message = \"Home\";\r\n        this.showLogin = true;\r\n    }\r\n\r\n    login() {\r\n        console.log(this.email);\r\n        console.log(this.password);\r\n        return this.auth.login(this.email, this.password)\r\n        .then(response => {\r\n            sessionStorage.setItem(\"user\", JSON.stringify(response.user));\r\n            this.loginError = \"\";\r\n            this.router.navigate(\"List\");\r\n        })\r\n        .catch(error => {\r\n            console.log(\"login failed\");\r\n            console.log(error);\r\n            this.loginError = \"Invalid credentials\"\r\n        })\r\n    }\r\n\r\n    showRegister() {\r\n        this.User = {\r\n            \"firstName\": \"\",\r\n            \"lastName\": \"\",\r\n            \"email\": \"\",\r\n            \"password\": \"\"\r\n        };\r\n        this.registerError = \"\";\r\n        this.showLogin = false;\r\n    }\r\n\r\n    async saveUser() {\r\n        let serverResponse = await this.users.save(this.user);\r\n        if (!serverResponse.error) {\r\n            this.showLogin = true;\r\n        } else {\r\n            this.registerError = \"There was a problem registering this user\";\r\n        }\r\n    }\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {Galleries} from \"../resources/data/galleries\";\r\nimport {Pictures} from \"../resources/data/pictures\";\r\nimport {AuthService} from \"aurelia-auth\"\r\n\r\n@inject(Galleries, Pictures, AuthService)\r\nexport class List {\r\n    constructor(galleries, pictures, auth) {\r\n        this.galleries = galleries;\r\n        this.pictures = pictures;\r\n        this.auth = auth;\r\n\r\n        this.user = JSON.parse(sessionStorage.getItem(\"user\"));\r\n        // this.showGalleryList = true;\r\n\r\n        this.galleryObject = {\r\n            \"userId\": this.user._id,\r\n            \"name\": \"\",\r\n            \"description\": \"\",\r\n            \"dateCreated\": new Date()\r\n        };\r\n    }\r\n\r\n    logout() {\r\n        sessionStorage.removeItem(\"user\");\r\n        this.auth.logout();\r\n    }\r\n\r\n    async activate() {\r\n        await this.galleries.getUserGalleries(this.user._id);\r\n    }\r\n\r\n    async openGallery(gallery) {\r\n        this.galleryObject = gallery;\r\n        await this.pictures.getGalleryPictures(this.galleryObject._id);\r\n        this.pictureObject = {\r\n            \"galleryId\": this.galleryObject._id\r\n        }\r\n        // this.showGalleryList = false;\r\n    }\r\n\r\n    async exitGallery() {\r\n        // this.showGalleryList = true;\r\n        this.galleryObject = undefined;\r\n    }\r\n\r\n    async saveGallery() {\r\n        if (this.galleryObject) {\r\n            this.galleryObject.userId = this.user._id;\r\n            let response = await this.galleries.save(this.galleryObject);\r\n            if (response.error) {\r\n                alert(\"There was an issue saving this gallery\");\r\n            } else {\r\n                this.galleryObject = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteGallery(gallery) {\r\n        this.galleries.delete(gallery._id);\r\n    }\r\n\r\n    async savePicture() {\r\n        if (this.pictureObject) {\r\n            let response = await this.pictures.save(this.pictureObject);\r\n            if (response.error) {\r\n                alert(\"There was an issue saving this picture\");\r\n            } else {\r\n                var pictureId = response._id;\r\n                if (this.imageFile && this.imageFile.length) {\r\n                    await this.pictures.uploadImageFile(this.imageFile, this.user._id, this.galleryObject._id, pictureId);\r\n                    this.imageFile = [];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    async openPicture(picture) {\r\n        this.pictureObject = picture;\r\n        console.log(this.pictureObject);\r\n    }\r\n\r\n    async deletePicture(picture) {\r\n        this.pictures.delete(picture._id);\r\n    }\r\n\r\n    async uploadPicture() {\r\n        this.imageFile = new Array();\r\n        this.imageFile.push(this.files[0]);\r\n    }\r\n}","export function configure(config) {\n  config.globalResources([\n    \"./value-converters/date-format\",\n    \"./elements/flatpickr\"\n  ]);\n}\n","import {inject} from \"aurelia-framework\"\r\nimport {HttpClient, json} from \"aurelia-fetch-client\"\r\n\r\n@inject(HttpClient)\r\nexport class DataServices {\r\n    constructor(http) {\r\n        this.httpClient = http;\r\n        this.BASE_URL = \"http://localhost:80/api/\";\r\n\r\n        this.httpClient.configure(config => {\r\n            config\r\n                .withBaseUrl(this.BASE_URL)\r\n                .withDefaults({\r\n                    \"credentials\": \"same-origin\",\r\n                    \"headers\": {\r\n                        \"Accept\": \"application/json\",\r\n                        \"X-Requested-With\": \"Fetch\"\r\n                    }\r\n                })\r\n                .withInterceptor({\r\n                    request(request) {\r\n                        console.log(`Requesting ${request.method} ${request.url}`);\r\n                        var authHeader = \"Bearer \" + localStorage.getItem(\"aurelia_token\");\r\n                        request.headers.append(\"Authorization\", authHeader);\r\n                        return request;\r\n                    },\r\n                    response(response) {\r\n                        console.log(`Received ${response.status} ${response.url}`);\r\n                        return response;\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    get(url) {\r\n        return this.httpClient.fetch(url)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                return data;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    post(content, url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                \"method\": \"post\",\r\n                \"body\": json(content)\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    put(content, url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                \"method\": \"put\",\r\n                \"body\": json(content)\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    delete(url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                \"method\": \"delete\"\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    uploadFiles(files, url) {\r\n        return  this.httpClient\r\n        .fetch(url, {\r\n            \"method\": \"post\",\r\n            \"body\": files\r\n        })\r\n        .then(response => response.json())\r\n        .then(object => {\r\n            return object;\r\n        })\r\n        .catch(error => {\r\n            return error;\r\n        });\r\n    }\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {DataServices} from \"./data-services\";\r\n\r\n@inject(DataServices)\r\nexport class Galleries {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.GALLERY_SERVICE = \"galleries\";\r\n        this.galleryList = [];\r\n    }\r\n\r\n    async getUserGalleries(id) {\r\n        let response = await this.data.get(id + \"/\" + this.GALLERY_SERVICE);\r\n        if (!response.error && !response.message) {\r\n            this.galleryList = response;\r\n        }\r\n    }\r\n\r\n    async save(gallery) {\r\n        if (gallery)\r\n        {\r\n            if (!gallery._id) {\r\n                let response = await this.data.post(gallery, this.GALLERY_SERVICE);\r\n                if (!response.error) {\r\n                    console.log(\"adding to array\");\r\n                    this.galleryList.push(response);\r\n                    console.log(this.galleryList);\r\n                    console.log(response);\r\n                }\r\n                return response;\r\n            } else {\r\n                let response = await this.data.put(gallery, this.GALLERY_SERVICE + \"/\" + gallery._id);\r\n                if (!response.error) {\r\n                }\r\n                return response;\r\n            }\r\n        }\r\n    }\r\n    \r\n    async delete(id) {\r\n        let response = await this.data.delete(this.GALLERY_SERVICE + \"/\" + id);\r\n        if (!response.error) {\r\n            for (let i = 0; i < this.galleryList.length; i++) {\r\n                if (this.galleryList[i]._id == id) {\r\n                    this.galleryList.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {DataServices} from \"./data-services\";\r\nimport {Galleries} from \"./galleries\";\r\n\r\n@inject(DataServices, Galleries)\r\nexport class Pictures {\r\n    constructor(data, galleries) {\r\n        this.data = data;\r\n        this.galleries = galleries;\r\n        this.PICTURE_SERVICE = \"pictures\"\r\n        this.pictureList = [];\r\n    }\r\n\r\n    async getGalleryPictures(id) {\r\n        let response = await this.data.get(this.galleries.GALLERY_SERVICE + \"/\" + id + \"/\" + this.PICTURE_SERVICE);\r\n        if (!response.error && !response.message) {\r\n            this.pictureList = response;\r\n        } else {\r\n            this.pictureList = [];\r\n        }\r\n    }\r\n    \r\n    async getPicture(galleryId, pictureId) {\r\n        let response = await this.data.get(this.galleries.GALLERY_SERVICE + \"/\" + galleryId + \"/\" + this.PICTURE_SERVICE + \"/\" + pictureId);\r\n        if (!response.error && !response.message) {\r\n            return response;\r\n        }\r\n    }\r\n\r\n    async save(picture) {\r\n        console.log(picture);\r\n        console.log(picture._id);\r\n        if (!picture._id) {\r\n            let response = await this.data.post(picture, this.PICTURE_SERVICE)\r\n            if (!response.error) {\r\n                this.pictureList.push(response);\r\n            }\r\n            return response;\r\n        } else {\r\n            let response = await this.data.put(picture, this.galleries.GALLERY_SERVICE + \"/\" + picture.galleryId + \"/\" + this.PICTURE_SERVICE + \"/\" + picture._id);\r\n            if (!response.error) {\r\n            }\r\n            return response;\r\n        }\r\n    }\r\n    \r\n    async delete(id) {\r\n        let response = await this.data.delete(this.galleries.GALLERY_SERVICE + \"/\" + this.data.galleryId + \"/\" + this.PICTURE_SERVICE + \"/\" + id);\r\n        if (!response.error) {\r\n            for (let i = 0; i < this.pictureList.length; i++) {\r\n                if (this.pictureList[i]._id == id) {\r\n                    this.pictureList.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    async uploadImageFile(files, userId, galleryId, pictureId) {\r\n        let formData = new FormData();\r\n\r\n        console.log(\"looking at file\");\r\n        files.forEach((item, index) => {\r\n            formData.append(\"file\" + index, item);\r\n        });\r\n\r\n        let response = await this.data.uploadFiles(formData, this.PICTURE_SERVICE + \"/\" + userId + \"/\" + galleryId + \"/\" + pictureId + \"/files\");\r\n    }\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {DataServices} from \"./data-services\";\r\n\r\n@inject(DataServices)\r\nexport class Users {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.USER_SERVICE = \"users\";\r\n    }\r\n\r\n    async save(user) {\r\n        if (user) {\r\n            let serverResponse = await this.data.post(user, this.USER_SERVICE);\r\n            return serverResponse;\r\n        }\r\n    }\r\n}","import {inject, bindable, bindingMode} from 'aurelia-framework';\r\nimport Flatpickr from 'flatpickr';\r\n\r\n@inject(Element)\r\nexport class FlatPickerCustomElement {\r\n    @bindable({ \"defaultBindingMode\": bindingMode.twoWay }) value;\r\n\r\n    constructor(element) {\r\n        this.element = element;\r\n    }\r\n\r\n    bind() {\r\n        const defaultConfig = {\r\n            \"altInput\": true,\r\n            \"altFormat\": \"F j, Y\",\r\n            \"wrap\": true\r\n        };\r\n\r\n        this._config = Object.assign({}, defaultConfig);\r\n        this._config.onChange = this._config.onMonthChange = this._config.onYearChange = this.onChange.bind(this);\r\n    }\r\n\r\n    attached() {\r\n        this.flatpickr = new Flatpickr(this.element.querySelector(\".aurelia-flatpickr\"), this._config);\r\n    }\r\n\r\n    onChange(selectedDates, dateStr, instance) {\r\n        this.value = selectedDates[0];\r\n    }\r\n\r\n    valueChanged() {\r\n        if (!this.flatpickr) {\r\n            return;\r\n        }\r\n\r\n        if (this.value === this.flatpickr.selectedDates[0]) {\r\n            return;\r\n        }\r\n\r\n        let newDate = this.value ? this.value : undefined;\r\n\r\n        this.flatpickr.setDate(newDate);\r\n    }\r\n}","import moment from \"moment\";\r\n\r\nexport class DateFormatValueConverter {\r\n    toView(value) {\r\n        if (value === undefined || value === null) {\r\n            return;\r\n        }\r\n\r\n        return moment(value).format(\"MMM do YYYY\");\r\n    }\r\n}"],"sourceRoot":".."}